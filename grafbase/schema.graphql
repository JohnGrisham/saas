enum IdentityType {
  CREDENTIALS
  GITHUB
}

enum SubStatus {
  INCOMPLETE
  INCOMPLETE_EXPIRED
  TRIALING
  ACTIVE
  PAST_DUE
  CANCELED
  UNPAID
}

type User @model {
  id: ID!
  name: String
  email: Email! @unique
  identities: [Identity!]
  customer: Customer
}

type Identity @model {
  id: ID!
  sub: String! @unique
  type: IdentityType!
  user: User!
}

type Customer @model {
  id: ID!
  stripeId: String! @unique
  subscriptions: [Subscription!]
  user: User!
}

type Product @model {
  id: ID!
  name: String!
  price: String!
  features: [Feature!]!
}

type Feature @model {
  id: ID!
  name: String! @unique
  description: String
}

type Subscription @model {
  id: ID!
  customer: Customer!
  product: Product!
  quantity: Int!
  status: SubStatus!
  startDate: Timestamp!
  endDate: Timestamp
  trialStart: Timestamp
  trialEnd: Timestamp
}
